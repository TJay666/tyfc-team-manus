{% extends 'base.html' %}

{% block title %}我的比賽{% endblock %}

{% block content %}
<div class="section-title">
    <h2>我的比賽</h2>
</div>

<div class="card">
    <div class="table-container">
        <table class="table">
            <thead>
                <tr>
                    <th class="col-time">比賽時間</th>
                    <th class="col-name">聯賽</th>
                    <th class="col-opponent">對手名稱</th>
                    <th class="col-venue">比賽場地</th>
                    <th class="col-status">狀態</th>
                    <th class="col-participation">我的參與</th>
                    <th class="col-actions">操作</th>
                </tr>
            </thead>
            <tbody>
                {% for match in matches %}
                <tr>
                    <td class="col-time">{{ match.match_date|date:"Y-m-d H:i" }}</td>
                    <td class="col-name">{{ match.league.name }}</td>
                    <td class="col-opponent">{{ match.opponent_name }}</td>
                    <td class="col-venue">{{ match.venue }}</td>
                    <td class="col-status">
                        {% if match.status == 'scheduled' %}
                            <span class="badge badge-primary">已安排</span>
                        {% elif match.status == 'in_progress' %}
                            <span class="badge badge-warning">進行中</span>
                        {% elif match.status == 'finished' %}
                            <span class="badge badge-success">已結束</span>
                        {% elif match.status == 'cancelled' %}
                            <span class="badge badge-danger">已取消</span>
                        {% endif %}
                    </td>
                    <td class="col-participation">
                        {% if match.is_participating %}
                            <span class="badge badge-success">參加</span>
                        {% else %}
                            <span class="badge badge-secondary">不參加</span>
                        {% endif %}
                    </td>
                    <td class="col-actions">
                        <div class="action-buttons">
                            {% if match.can_edit %}
                                <a href="/dashboard/my-matches/{{ match.id }}/participate/" class="btn btn-primary">更改參與狀態</a>
                            {% else %}
                                <button class="btn btn-secondary" disabled>時間已過</button>
                            {% endif %}
                        </div>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7" style="text-align: center;">目前沒有比賽資料。</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

